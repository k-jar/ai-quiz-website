<section class="quiz-container">
  <h1>{{ quiz?.title }}</h1>
  <section class="reading">
    <mat-accordion>
      <mat-expansion-panel [expanded]="!showQuestions">
        <mat-expansion-panel-header>
          <mat-panel-title> Reading </mat-panel-title>
        </mat-expansion-panel-header>
        <p>{{ quiz?.reading }}</p>
      </mat-expansion-panel>
    </mat-accordion>
    <button
      mat-raised-button
      color="primary"
      (click)="viewQuestions()"
      *ngIf="!showQuestions"
    >
      View Questions
    </button>
  </section>

  <section class="questions" *ngIf="showQuestions">
    <ng-container *ngFor="let question of quiz?.questions; let i = index">
        <ng-container #container></ng-container> <!-- Placeholder for dynamic component, note this is within ngIf -->
    </ng-container>
    <button mat-raised-button color="accent" (click)="submitQuiz()" *ngIf="!quizSubmitted">Submit Quiz</button>
  </section>

  <section class="results">
    <mat-card *ngIf="quizSubmitted">
      <mat-card-content>
        <p>
          You answered {{ score }} out of
          {{ quiz?.questions?.length }} questions correctly.
        </p>
        <button mat-raised-button color="primary" (click)="resetQuiz()">
          Retry
        </button>
        <button mat-raised-button color="primary" (click)="showAnswers()" *ngIf="quizSubmitted && !showAnswer">
          Show Answers
        </button>
      </mat-card-content>
    </mat-card>
  </section>
</section>
